(window.webpackJsonp=window.webpackJsonp||[]).push([[499],{1499:function(e,t,r){"use strict";r.r(t),r.d(t,{UserProfileEditor:function(){return S}});r(8309),r(4916),r(5306);var i=r(5843),n=r.n(i),a=r(7766),o=r.n(a),s=r(1222),c=r.n(s),l=r(4382),d=r.n(l),u=r(7672),f=r.n(u),_=r(2386),h=r(1326),v=r(3659),p=r(9264),m=r(3735),g=r(77),A=r(4383),w=r(9067),y=A.h.getStore(),S=function(e){function t(){for(var t,r,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r=e.call.apply(e,o()(t=[this]).call(t,a))||this,f()(c()(r),"helpText","Click on a property to edit"),f()(c()(r),"editableFieldsValidatorFunctions",{name:p.u2,ig_user_id:p.oS,email:p.sQ,school:p.oS,current_level:p.If,last_question_answered_at:p.If}),f()(c()(r),"_promiseErrorHandler",(function(){return r.setState({error:"Unknown error occured",isEditing:!0})})),f()(c()(r),"__confirmAction",(function(e){var t=e.target.dataset.action;r.setState({confirmAction:t,isConfirmed:!1})})),f()(c()(r),"__executeConfirmedAction",(function(){var e=r.state.confirmAction;if(r.setState({isConfirmed:!0,workProgress:"Making irreversible changes to the database...."}),"delete"===e)return(0,m.V)(g.SA.deleteUser,{user:r.state.__receivedData.id,field:r.state.fieldEdited}).then((function(e){var t=e.error||e.data.error;if(t)return r.setState({error:t,workProgress:null,confirmAction:null});r.props.closeProfileEditor(r.state.__receivedData)})).catch(r._promiseErrorHandler);if("qualification-toggle"==e){var t=r.state.__receivedData.is_disqualified?"requalify":"disqualify",i=g.SA[t];return(0,m.V)(i,{user:r.state.__receivedData.id}).then(r.__cxResponses).catch(r._promiseErrorHandler)}})),f()(c()(r),"__cxResponses",(function(e){r.setState({confirmAction:null}),r.__onResponse(e)})),f()(c()(r),"syncProfileInfoWithServer",(function(e){var t=r.state.fieldEdited;"last_question_answered_at"!==t&&"current_level"!==t||(e=e.length>1?e.replace(/^0+/,""):e);var i,a=r.editableFieldsValidatorFunctions[t](e);if(!a.valid)return r.setState({error:a.error,workProgress:null,isEditing:!0});r.setState({workProgress:"Syncing new data with the server..."}),(0,m.V)(g.SA.adminEditUserData,{user:r.state.__receivedData.id,field:t,new_value:n()(i=e||"").call(i)}).then(r.__onResponse).catch(r._promiseErrorHandler)})),f()(c()(r),"__closeAction",(function(){return r.setState({confirmAction:null,isConfirmed:null})})),r}d()(t,e);var r=t.prototype;return r._getKeys=function(e){var t;return o()(t=["id","has_verified_email"]).call(t,(0,v.Z)(this.editableFieldsValidatorFunctions))},r._isAllowedToEditProfile=function(){return!0},r._getActionPanel=function(){if(y.isLoggedIn){var e=this.state.__receivedData;return e&&e.id!==y.userData.id?(0,_.az)("div",{children:[(0,_.az)("div",{class:"heading-text clr",style:{fontSize:"2rem"},children:"DANGER SECTION"}),(0,_.az)("span",{"data-action":"delete",class:"hoverable action-button act",onClick:this.__confirmAction,children:"Delete Account"}),(0,_.az)("span",{"data-action":"qualification-toggle",class:"hoverable action-button act",onClick:this.__confirmAction,children:[e.is_disqualified?"Requalify":"Disqualify"," Account"]})]}):void 0}},r.render=function(t,r){var i=r.confirmAction;if(!i)return e.prototype.render.call(this,t,r);var n=r.__receivedData,a=n.is_disqualified,o=n.id,s=n.name;return r.isConfirmed?r.workProgress?(0,_.az)("div",{children:r.workProgress}):void 0:(0,_.az)(_.HY,{children:[(0,_.az)("div",{class:"mask",onClick:this.__closeAction}),(0,_.az)(w.GI,{close:this.__executeConfirmedAction,title:"Woah there..",errorHead:(0,_.az)("span",{children:["Are you sure you want to",(0,_.az)("span",{style:{color:"red"},children:" "+("delete"===i?i:a?"Requalify":"Disqualify").toUpperCase()})," "+o+"( "+s+" ) ?"]})}),";"]})},t}(h.Profile)}}]);